subcode: shader_main
    vec2 c = v2_uv;
    c *= pow(2.0,5.0*sin(f_time*0.3)-5.0);
    c += vec2(-1.18, 0.301);
    
    vec2 z = vec2(0.0);
    f_iter = -1.0
    $for i=0:200
        z = vec2( z.x*z.x - z.y*z.y, 2.0*z.x*z.y) + c;
        $if dot(z,z) > 256.0
            f_iter = float(i)
            break;
    
    $if f_iter >= 0
        f_iter = f_iter + 2.0 - log(log(length(z)))/log(2.0);
    
    float hue = pow(f_iter/50.0,0.4+0.2*sin(0.324*f_time));
    hue += f_time*0.2454;

    color = hsv2rgb(vec3(hue,1.0,1.0))
    $if f_iter < 1.0
        color = vec3(0.0)

    $function hsv2rgb(v3_c)
        $return_type vec3
        v4_k = vec4(1.0, 2.0/3.0, 1.0/3.0, 3.0)
        v3_p = abs(fract(v3_c.xxx + v4_k.xyz) * 6.0 - v4_k.www)
        return v3_c.z * mix(v4_k.xxx, clamp(v3_p - v4_k.xxx, 0.0, 1.0), v3_c.y);
